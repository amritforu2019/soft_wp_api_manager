<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Problem? Quick Fix Guide</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        body { background: #f5f5f5; padding: 30px 0; }
        .hero { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; border-radius: 10px; margin-bottom: 30px; }
        .fix-card { background: white; border-radius: 10px; padding: 30px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .step { background: #e7f3ff; border-left: 4px solid #007bff; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .code-block { background: #f8f9fa; border: 1px solid #dee2e6; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; margin: 10px 0; }
        .success-box { background: #d4edda; border: 2px solid #28a745; padding: 20px; border-radius: 5px; margin: 20px 0; }
        .warning-box { background: #fff3cd; border: 2px solid #ffc107; padding: 20px; border-radius: 5px; margin: 20px 0; }
        .danger-box { background: #f8d7da; border: 2px solid #dc3545; padding: 20px; border-radius: 5px; margin: 20px 0; }
        .btn-fix { font-size: 18px; padding: 15px 30px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero text-center">
            <h1><i class="bi bi-shield-lock"></i> Can't Login with admin/admin123?</h1>
            <p class="lead">Don't worry! Here are 3 quick ways to fix it.</p>
        </div>

        <!-- Method 1 -->
        <div class="fix-card">
            <h2 class="text-primary"><i class="bi bi-1-circle-fill"></i> Method 1: Use Password Reset Tool (EASIEST)</h2>
            <p class="lead">This is the fastest way - takes only 30 seconds!</p>
            
            <div class="step">
                <h5>Step 1: Open the reset tool</h5>
                <a href="reset_password.php" target="_blank" class="btn btn-primary btn-fix">
                    <i class="bi bi-tools"></i> Open Password Reset Tool
                </a>
            </div>

            <div class="step">
                <h5>Step 2: Fill in the form</h5>
                <ul>
                    <li><strong>Username:</strong> admin</li>
                    <li><strong>New Password:</strong> admin123</li>
                    <li><strong>Confirm Password:</strong> admin123</li>
                </ul>
            </div>

            <div class="step">
                <h5>Step 3: Click "Reset/Create Password"</h5>
                <p>You should see a green success message.</p>
            </div>

            <div class="step">
                <h5>Step 4: Try login again</h5>
                <a href="login.php" target="_blank" class="btn btn-success">
                    <i class="bi bi-box-arrow-in-right"></i> Go to Login Page
                </a>
            </div>

            <div class="warning-box mt-4">
                <h5><i class="bi bi-exclamation-triangle"></i> Important!</h5>
                <p class="mb-0">After successful login, <strong>delete the reset_password.php file</strong> for security!</p>
            </div>
        </div>

        <!-- Method 2 -->
        <div class="fix-card">
            <h2 class="text-success"><i class="bi bi-2-circle-fill"></i> Method 2: Run SQL in phpMyAdmin</h2>
            <p class="lead">If you prefer using database directly</p>
            
            <div class="step">
                <h5>Step 1: Open phpMyAdmin</h5>
                <a href="http://localhost/phpmyadmin" target="_blank" class="btn btn-info">
                    <i class="bi bi-database"></i> Open phpMyAdmin
                </a>
            </div>

            <div class="step">
                <h5>Step 2: Select database</h5>
                <p>Click on <code>sms_api_manager</code> in left sidebar</p>
            </div>

            <div class="step">
                <h5>Step 3: Click "SQL" tab</h5>
                <p>You'll see a text area to enter SQL commands</p>
            </div>

            <div class="step">
                <h5>Step 4: Copy and paste this SQL</h5>
                <div class="code-block">
UPDATE `admin_users` <br>
SET `password` = '$2y$10$8K1p/a0dL3LKznjr5.B.C.vUKx8F5RxPF5P3bI5xXPPJLJqQJfDuS' <br>
WHERE `username` = 'admin';
                </div>
                <button class="btn btn-sm btn-secondary" onclick="copySql()">
                    <i class="bi bi-clipboard"></i> Copy SQL
                </button>
            </div>

            <div class="step">
                <h5>Step 5: Click "Go" button</h5>
                <p>You should see "1 row affected"</p>
            </div>

            <div class="step">
                <h5>Step 6: Try login</h5>
                <a href="login.php" target="_blank" class="btn btn-success">
                    <i class="bi bi-box-arrow-in-right"></i> Go to Login Page
                </a>
            </div>
        </div>

        <!-- Method 3 -->
        <div class="fix-card">
            <h2 class="text-warning"><i class="bi bi-3-circle-fill"></i> Method 3: Re-import Database</h2>
            <p class="lead">If nothing else works, start fresh</p>
            
            <div class="danger-box">
                <h5><i class="bi bi-exclamation-triangle"></i> Warning!</h5>
                <p class="mb-0">This will delete all existing data (customers, messages, etc.)</p>
            </div>

            <div class="step">
                <h5>Step 1: Drop existing database</h5>
                <ul>
                    <li>Open phpMyAdmin</li>
                    <li>Select <code>sms_api_manager</code></li>
                    <li>Click "Operations" tab</li>
                    <li>Scroll down and click "Drop the database"</li>
                </ul>
            </div>

            <div class="step">
                <h5>Step 2: Create new database</h5>
                <ul>
                    <li>Click "New" in phpMyAdmin</li>
                    <li>Database name: <code>sms_api_manager</code></li>
                    <li>Click "Create"</li>
                </ul>
            </div>

            <div class="step">
                <h5>Step 3: Import database.sql</h5>
                <ul>
                    <li>Select the new <code>sms_api_manager</code> database</li>
                    <li>Click "Import" tab</li>
                    <li>Choose file: <code>database.sql</code></li>
                    <li>Click "Go"</li>
                </ul>
            </div>

            <div class="step">
                <h5>Step 4: Try login</h5>
                <a href="login.php" target="_blank" class="btn btn-success">
                    <i class="bi bi-box-arrow-in-right"></i> Go to Login Page
                </a>
            </div>
        </div>

        <!-- Verification -->
        <div class="fix-card">
            <h2 class="text-info"><i class="bi bi-check-circle"></i> How to Verify Everything Works</h2>
            
            <div class="success-box">
                <h5>âœ… Successful Login Should:</h5>
                <ol>
                    <li>Accept username: <code>admin</code> and password: <code>admin123</code></li>
                    <li>Redirect to Dashboard page</li>
                    <li>Show "Welcome, System Administrator" in top right</li>
                    <li>Display sidebar menu with Dashboard, Customers, Messages, etc.</li>
                </ol>
            </div>

            <h5>Check Database Manually:</h5>
            <div class="step">
                <p>In phpMyAdmin, run this SQL to verify admin user:</p>
                <div class="code-block">
SELECT id, username, full_name, status<br>
FROM admin_users<br>
WHERE username = 'admin';
                </div>
                <p>Should return 1 row with status = "active"</p>
            </div>
        </div>

        <!-- Help -->
        <div class="fix-card">
            <h2 class="text-danger"><i class="bi bi-question-circle"></i> Still Not Working?</h2>
            
            <div class="step">
                <h5>Common Issues:</h5>
                <ul>
                    <li><strong>MySQL not running:</strong> Start it in XAMPP Control Panel</li>
                    <li><strong>Database doesn't exist:</strong> Create it in phpMyAdmin</li>
                    <li><strong>Table doesn't exist:</strong> Import database.sql</li>
                    <li><strong>Blank page:</strong> Enable error display in PHP</li>
                </ul>
            </div>

            <div class="step">
                <h5>Enable Error Display:</h5>
                <p>Add these lines to the top of <code>login.php</code>:</p>
                <div class="code-block">
error_reporting(E_ALL);<br>
ini_set('display_errors', 1);
                </div>
                <p>This will show any PHP errors preventing login.</p>
            </div>

            <div class="step">
                <h5>Check Files:</h5>
                <p>Open <code>TROUBLESHOOTING.md</code> for detailed debugging steps.</p>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-4">
            <p class="text-muted">
                <i class="bi bi-info-circle"></i> 
                For more help, see: <a href="TROUBLESHOOTING.md" target="_blank">TROUBLESHOOTING.md</a>
            </p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function copySql() {
            const sql = "UPDATE `admin_users` SET `password` = '$2y$10$8K1p/a0dL3LKznjr5.B.C.vUKx8F5RxPF5P3bI5xXPPJLJqQJfDuS' WHERE `username` = 'admin';";
            navigator.clipboard.writeText(sql).then(() => {
                alert('SQL copied to clipboard!');
            });
        }
    </script>
</body>
</html>
